{% extends "basep.html" %}

{% block extra_css %}
<style>
  /* Responsive scroll for table on small screens */
  .table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  /* Center and consistent spacing for the page */
  .container {
    max-width: 960px;
    margin-top: 2rem;
    margin-bottom: 2rem;
  }
  /* Header styling */
  h2 {
    font-weight: 700;
    margin-bottom: 0.4rem;
  }
  p.lead {
    font-size: 1.1rem;
    color: #555;
    margin-bottom: 1.5rem;
  }
  /* Styling the form controls inside the table */
  select.form-select {
    min-width: 150px;
  }
  .form-group {
    margin-bottom: 0;
  }
  /* Button styling */
  button.btn-primary {
    border-radius: 12px;
    padding: 0.55rem 2rem;
    font-weight: 600;
    font-size: 1.1rem;
  }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <h2>Manage Weekly Menu</h2>
  <p class="lead">
    Select the dishes you will be serving for lunch and dinner each day of the week.
  </p>

  <form method="post" novalidate>
    {% csrf_token %}
    {{ formset.management_form }}

    <div class="table-responsive shadow rounded">
      <table class="table table-bordered table-hover align-middle mb-4 text-center">
        <thead class="table-light">
          <tr>
            <th scope="col">Day</th>
            <th scope="col">Lunch Menu</th>
            <th scope="col">Dinner Menu</th>
          </tr>
        </thead>
        <tbody>
          {% for day_code, day_name in days %}
          <tr>
            <td class="fw-bold align-middle">{{ day_name }}</td>
            {% for form in formset %}
              {% if form.instance.day_of_week == day_code %}
                <td>
                  <div class="form-group">
                    {{ form.menu_items.errors }}
                    {{ form.menu_items|add_class:"form-select" }}
                    {{ form.id }}
                  </div>
                </td>
              {% endif %}
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-center">
      <button type="submit" class="btn btn-primary">Save Menu</button>
    </div>
  </form>
</div>
{% endblock %}
